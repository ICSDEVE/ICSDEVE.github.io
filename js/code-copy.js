KEEP.initCodeCopy=()=>{HTMLElement.prototype.wrap=function(e){this.parentNode.insertBefore(e,this),this.parentNode.removeChild(this),e.appendChild(this)},document.querySelectorAll("figure.highlight").forEach(e=>{const t=document.createElement("div");e.wrap(t),t.classList.add("highlight-container"),t.insertAdjacentHTML("beforeend",'<div class="copy-btn"><i class="fas fa-copy"></i></div>');const n=e.parentNode.querySelector(".copy-btn");n.addEventListener("click",e=>{const t=e.currentTarget,n=[...t.parentNode.querySelectorAll(".code .line")].map(e=>e.innerText).join("\n"),o=document.createElement("textarea");o.style.top=window.scrollY+"px",o.style.position="absolute",o.style.opacity="0",o.readOnly=!0,o.value=n,document.body.append(o);const a=document.getSelection(),c=a.rangeCount>0&&a.getRangeAt(0);o.select(),o.setSelectionRange(0,n.length),o.readOnly=!1;const r=document.execCommand("copy");t.querySelector("i").className=r?"fas fa-check":"fas fa-times",o.blur(),t.blur(),c&&(a.removeAllRanges(),a.addRange(c)),document.body.removeChild(o)}),n.addEventListener("mouseleave",e=>{setTimeout(()=>{e.target.querySelector("i").className="fas fa-copy"},300)})})};